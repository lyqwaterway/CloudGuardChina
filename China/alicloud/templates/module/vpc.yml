ROSTemplateFormatVersion: '2015-09-01'
Description: Create VPC and public VSwitch

Parameters:
  VpcName:
    Type: String
  VpcCidr:
    Type: String
  PublicVSwitchCidr:
    Type: String
  ZoneId:
    Type: String
    Default: cn-hangzhou-i

Resources:
  VPC:
    Type: ALIYUN::ECS::VPC
    Properties:
      VpcName: { Ref: VpcName }
      CidrBlock: { Ref: VpcCidr }
      Description: "Management VPC"
      EnableIpv6: false

  PublicVSwitch:
    Type: ALIYUN::ECS::VSwitch
    Properties:
      ZoneId: { Ref: ZoneId }
      VSwitchName: public-subnet
      CidrBlock: { Ref: PublicVSwitchCidr }
      VpcId: { Ref: VPC }

Outputs:
  VpcId:
    Value: { Ref: VPC }
  PublicVSwitchId:
    Value: { Ref: PublicVSwitch }